#!/usr/bin/env python3.12

import unittest


def collatz_sequence(n: int):
    """
    Возвращает последовательность Коллатца для заданного числа n.
    Последовательность заканчивается числом 1.
    """
    if n <= 0:
        raise ValueError("Число должно быть положительным")
    seq = [n]
    try:
        while n != 1:
            if n % 2 == 0:
                n = n // 2
            else:
                n = 3 * n + 1
            seq.append(n)
        return seq
    except ValueError as e:
        print(f"Ошибка: {e}")


class TestСollatz(unittest.TestCase):
    def test_simple(self):
        self.assertEqual(collatz_sequence(16), [16, 8, 4, 2, 1])

    def test_one_element(self):
        self.assertEqual(collatz_sequence(1), [1])
    
    def test_big_number(self):
        self.assertEqual(collatz_sequence(100000000000000000000), [100000000000000000000, 50000000000000000000, 25000000000000000000, 12500000000000000000, 6250000000000000000, 3125000000000000000, 1562500000000000000, 781250000000000000, 390625000000000000, 195312500000000000, 97656250000000000, 48828125000000000, 24414062500000000, 12207031250000000, 6103515625000000, 3051757812500000, 1525878906250000, 762939453125000, 381469726562500, 190734863281250, 95367431640625, 286102294921876, 143051147460938, 71525573730469, 214576721191408, 107288360595704, 53644180297852, 26822090148926, 13411045074463, 40233135223390, 20116567611695, 60349702835086, 30174851417543, 90524554252630, 45262277126315, 135786831378946, 67893415689473, 203680247068420, 101840123534210, 50920061767105, 152760185301316, 76380092650658, 38190046325329, 114570138975988, 57285069487994, 28642534743997, 85927604231992, 42963802115996, 21481901057998, 10740950528999, 32222851586998, 16111425793499, 48334277380498, 24167138690249, 72501416070748, 36250708035374, 18125354017687, 54376062053062, 27188031026531, 81564093079594, 40782046539797, 122346139619392, 61173069809696, 30586534904848, 15293267452424, 7646633726212, 3823316863106, 1911658431553, 5734975294660, 2867487647330, 1433743823665, 4301231470996, 2150615735498, 1075307867749, 3225923603248, 1612961801624, 806480900812, 403240450406, 201620225203, 604860675610, 302430337805, 907291013416, 453645506708, 226822753354, 113411376677, 340234130032, 170117065016, 85058532508, 42529266254, 21264633127, 63793899382, 31896949691, 95690849074, 47845424537, 143536273612, 71768136806, 35884068403, 107652205210, 53826102605, 161478307816, 80739153908, 40369576954, 20184788477, 60554365432, 30277182716, 15138591358, 7569295679, 22707887038, 11353943519, 34061830558, 17030915279, 51092745838, 25546372919, 76639118758, 38319559379, 114958678138, 57479339069, 172438017208, 86219008604, 43109504302, 21554752151, 64664256454, 32332128227, 96996384682, 48498192341, 145494577024, 72747288512, 36373644256, 18186822128, 9093411064, 4546705532, 2273352766, 1136676383, 3410029150, 1705014575, 5115043726, 2557521863, 7672565590, 3836282795, 11508848386, 5754424193, 17263272580, 8631636290, 4315818145, 12947454436, 6473727218, 3236863609, 9710590828, 4855295414, 2427647707, 7282943122, 3641471561, 10924414684, 5462207342, 2731103671, 8193311014, 4096655507, 12289966522, 6144983261, 18434949784, 9217474892, 4608737446, 2304368723, 6913106170, 3456553085, 10369659256, 5184829628, 2592414814, 1296207407, 3888622222, 1944311111, 5832933334, 2916466667, 8749400002, 4374700001, 13124100004, 6562050002, 3281025001, 9843075004, 4921537502, 2460768751, 7382306254, 3691153127, 11073459382, 5536729691, 16610189074, 8305094537, 24915283612, 12457641806, 6228820903, 18686462710, 9343231355, 28029694066, 14014847033, 42044541100, 21022270550, 10511135275, 31533405826, 15766702913, 47300108740, 23650054370, 11825027185, 35475081556, 17737540778, 8868770389, 26606311168, 13303155584, 6651577792, 3325788896, 1662894448, 831447224, 415723612, 207861806, 103930903, 311792710, 155896355, 467689066, 233844533, 701533600, 350766800, 175383400, 87691700, 43845850, 21922925, 65768776, 32884388, 16442194, 8221097, 24663292, 12331646, 6165823, 18497470, 9248735, 27746206, 13873103, 41619310, 20809655, 62428966, 31214483, 93643450, 46821725, 140465176, 70232588, 35116294, 17558147, 52674442, 26337221, 79011664, 39505832, 19752916, 9876458, 4938229, 14814688, 7407344, 3703672, 1851836, 925918, 462959, 1388878, 694439, 2083318, 1041659, 3124978, 1562489, 4687468, 2343734, 1171867, 3515602, 1757801, 5273404, 2636702, 1318351, 3955054, 1977527, 5932582, 2966291, 8898874, 4449437, 13348312, 6674156, 3337078, 1668539, 5005618, 2502809, 7508428, 3754214, 1877107, 5631322, 2815661, 8446984, 4223492, 2111746, 1055873, 3167620, 1583810, 791905, 2375716, 1187858, 593929, 1781788, 890894, 445447, 1336342, 668171, 2004514, 1002257, 3006772, 1503386, 751693, 2255080, 1127540, 563770, 281885, 845656, 422828, 211414, 105707, 317122, 158561, 475684, 237842, 118921, 356764, 178382, 89191, 267574, 133787, 401362, 200681, 602044, 301022, 150511, 451534, 225767, 677302, 338651, 1015954, 507977, 1523932, 761966, 380983, 1142950, 571475, 1714426, 857213, 2571640, 1285820, 642910, 321455, 964366, 482183, 1446550, 723275, 2169826, 1084913, 3254740, 1627370, 813685, 2441056, 1220528, 610264, 305132, 152566, 76283, 228850, 114425, 343276, 171638, 85819, 257458, 128729, 386188, 193094, 96547, 289642, 144821, 434464, 217232, 108616, 54308, 27154, 13577, 40732, 20366, 10183, 30550, 15275, 45826, 22913, 68740, 34370, 17185, 51556, 25778, 12889, 38668, 19334, 9667, 29002, 14501, 43504, 21752, 10876, 5438, 2719, 8158, 4079, 12238, 6119, 18358, 9179, 27538, 13769, 41308, 20654, 10327, 30982, 15491, 46474, 23237, 69712, 34856, 17428, 8714, 4357, 13072, 6536, 3268, 1634, 817, 2452, 1226, 613, 1840, 920, 460, 230, 115, 346, 173, 520, 260, 130, 65, 196, 98, 49, 148, 74, 37, 112, 56, 28, 14, 7, 22, 11, 34, 17, 52, 26, 13, 40, 20, 10, 5, 16, 8, 4, 2, 1])
    
    def test_negative_value(self):
        self.assertRaises(ValueError, collatz_sequence, -1)


if __name__ == '__main__':
    """Основная функция программы."""
    try:
        user_input = input("Введите натуральное число: ")
        n = int(user_input)
        sequence = collatz_sequence(n)
        print(" → ".join(map(str, sequence)))
    except ValueError as e:
        print(f"Ошибка: {e}")

    unittest.main()


